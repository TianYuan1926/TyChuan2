<!doctype html><html lang="zh-CN"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>配置 Supabase</title>
<link rel="stylesheet" href="styles.css">
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="config.js"></script>
</head><body>
<div class="wrap">
  <div class="card">
    <h2>配置 Supabase</h2>
    <p class="muted">这里会自动填入你当前的配置（已预置你提供的 URL 与 anon 公钥）。如需更改可直接修改并保存。</p>
    <div class="grid">
      <input id="u" class="full" placeholder="https://xxxx.supabase.co">
      <input id="k" class="full" placeholder="anon 公钥">
    </div>
    <div class="row" style="margin-top:10px">
      <button id="save" class="primary">保存</button>
      <a class="secondary" href="app.html">返回 app.html</a>
      <span id="msg" class="muted"></span>
    </div>
  </div>
</div>
<script>
const u=document.getElementById('u'), k=document.getElementById('k'), msg=document.getElementById('msg');
(()=>{ const cfg=sbConfig.getSupabaseConfig(); u.value=cfg.url; k.value=cfg.key; })();
document.getElementById('save').onclick=()=>{ sbConfig.setSupabaseConfig(u.value.trim(), k.value.trim()); msg.textContent='已保存'; setTimeout(()=>{const next=new URLSearchParams(location.search).get('next')||'app.html'; location.href=next;},500); };
</script>
</body></html>
